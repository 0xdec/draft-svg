"use strict";!function(){draft.View.mixin({svg:function t(e,i){var r=this;if(this._svgMaxWidth=e||this._svgMaxWidth||this.width(),this._svgMaxHeight=i||this._svgMaxHeight||this.height(),void 0===this._svg){var a,s,h,n,o,g,t,c;!function(){var e="http://www.w3.org/2000/svg",i="1.1";a=function(t){return draft.px(t.prop("x"))-t.width()/2},s=function(t){return-draft.px(t.prop("y"))-t.height()/2},h=r.doc.domID+":"+r.domID+":svg",n=function(t){return h+":"+t.domID},o=function(t){return document.getElementByID(n(t))},g=function(t){console.info("rendering svg:",t.domID);var i,r=document.createElementNS(e,t.type);switch(t.type){case"group":r=document.createElementNS(e,"g");var h=!0,c=!1,d=void 0;try{for(var u,p=t.children[Symbol.iterator]();!(h=(u=p.next()).done);h=!0){var f=u.value,v=g(f);v&&r.appendChild(v)}}catch(l){c=!0,d=l}finally{try{!h&&p["return"]&&p["return"]()}finally{if(c)throw d}}t.on("add",function(t){var e=g(t);e&&r.appendChild(e)}),t.on("remove",function(t){r.removeChild(o(t))});case"rect":i=function(t,e){switch(e=draft.px(e),t){case"width":r.setAttribute("width",e);case"x":r.setAttribute("x",a(this.target));break;case"height":r.setAttribute("height",e);case"y":r.setAttribute("y",s(this.target))}};break;case"circle":i=function(t,e){switch(e=draft.px(e),t){case"r":r.setAttribute("r",e);break;case"x":r.setAttribute("cx",e);break;case"y":r.setAttribute("cy",-e)}}}if("function"==typeof i){r.id=n(t),r.setAttribute("fill-opacity",0),r.setAttribute("stroke","#000"),r.setAttribute("stroke-width",1);for(var w in t.prop())i.apply({target:t},[w,t.prop(w)]);return t.on("change",i),r}},t=r._svg=document.createElementNS(e,"svg"),t.setAttribute("xmlns",e),t.setAttribute("version",i),t.id=n(r),c=function(e){if("width"===e||"height"===e){t.setAttribute("viewBox",[a(this.target),s(this.target),this.target.width(),this.target.height()].join(" "));var i=Math.min(draft.px(this.target._svgMaxWidth)/this.target.width(),draft.px(this.target._svgMaxHeight)/this.target.height()),r=this.target.width()*i,h=this.target.height()*i;this.target._svg.setAttribute("width",r),this.target._svg.setAttribute("height",h),console.info("aspect ratio:",this.target.aspectRatio)}},c.apply({target:r},["width"]),c.apply({target:r},["height"]),r.on("change",c),t.appendChild(g(r.parent))}()}return this._svg}})}();
//# sourceMappingURL=draft-svg.min.js.map
